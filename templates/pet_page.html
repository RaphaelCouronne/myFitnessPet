<!doctype html>
<html>
<head>
    <title>{{ pet_data[0] }} - Pet Page</title>
</head>
<body>
    <h1>{{ pet_data[0] }}</h1>
    <img src="{{ url_for('static', filename='data/dog.jpeg') }}" alt="{{ pet_data[0] }}">

    <h2>Nutrition Logs</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Nutrition</th>
            </tr>
        </thead>
        <tbody>
            {% for log in nutrition_logs %}
            <tr>
                <td>{{ log[1] }}</td>
                <td>{{ log[2] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form onsubmit="submitNutritionForm(event, '{{ pet_data[0] }}')">
        <label for="nutrition">Nutrition:</label>
        <input type="text" id="nutrition" name="nutrition"><br>
        <label for="date">Date:</label>
        <input type="text" id="date" name="date"><br>
        <input type="submit" value="Submit">
    </form>

    <h2>Weight Logs</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Weight</th>
            </tr>
        </thead>
        <tbody>
            {% for log in weight_logs %}
            <tr>
                <td>{{ log[1] }}</td>
                <td>{{ log[2] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>



    <form onsubmit="submitWeightForm(event, '{{ pet_data[0] }}')">
        <label for="weight">Weight:</label>
        <input type="text" id="weight" name="weight"><br>
        <label for="date">Date:</label>
        <input type="text" id="date" name="date"><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        function submitNutritionForm(event, petName) {
            event.preventDefault();
            var nutrition = document.getElementById("nutrition").value;
            var date = document.getElementById("date").value;

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/api/pet/" + petName + "/nutrition", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.send(JSON.stringify({ nutrition: nutrition, date: date }));

            xhr.onload = function () {
                if (xhr.status == 200) {
                    alert("Nutrition log added successfully for " + petName);
                } else {
                    alert("Error adding nutrition log for " + petName);
                }
            };
        }

        function submitWeightForm(event, petName) {
            event.preventDefault();
            var weight = document.getElementById("weight").value;
            var date = document.getElementById("date").value;

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/api/pet/" + petName + "/weight", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.send(JSON.stringify({ weight: weight, date: date }));

            xhr.onload = function () {
                if (xhr.status == 200) {
                    alert("Weight log added successfully for " + petName);
                } else {
                    alert("Error adding weight log for " + petName);
}
};
}
</script>
</body>
</html>
